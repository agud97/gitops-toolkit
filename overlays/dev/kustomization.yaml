# =============================================================================
# Kustomize Overlay - Development
# =============================================================================
# Example of using Kustomize for environment customization
# =============================================================================

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Namespace prefix/suffix
nameSuffix: -dev

# Common labels
commonLabels:
  environment: development

# Common annotations
commonAnnotations:
  managed-by: gitops-toolkit

# Resources to include
# resources:
#   - ../../manifests/custom/postgresql-cluster/cluster.yaml

# Patches
patches:
  # Reduce replicas for dev
  - patch: |-
      - op: replace
        path: /spec/instances
        value: 1
    target:
      kind: Cluster
      name: pg-cluster

  # Reduce storage for dev
  - patch: |-
      - op: replace
        path: /spec/storage/size
        value: 5Gi
    target:
      kind: Cluster
      name: pg-cluster

# Config Maps
# configMapGenerator:
#   - name: app-config
#     literals:
#       - LOG_LEVEL=debug
#       - ENVIRONMENT=development

# Secrets (not recommended to store in Git)
# secretGenerator:
#   - name: app-secrets
#     literals:
#       - API_KEY=dev-key

# Images
# images:
#   - name: myapp
#     newTag: dev-latest
